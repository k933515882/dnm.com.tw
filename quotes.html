<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DM SENSE | 線上報價系統</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;700" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #ff6b35; --dark: #1a1a2e; --light: #f8f9fa; --white: #fff; --gray: #666; }
        body { font-family: 'Noto Sans TC', sans-serif; background: var(--light); color: #333; padding-bottom: 120px; }
        header { background: var(--dark); color: var(--white); padding: 20px; text-align: center; position: sticky; top: 0; z-index: 100; }
        header h1 { font-size: 22px; font-weight: 700; }
        header p { font-size: 13px; opacity: 0.8; margin-top: 5px; }
        .container { max-width: 600px; margin: 0 auto; padding: 16px; }
        .step { background: var(--white); border-radius: 16px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); position: relative; }
        .step-header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; }
        .step-num { background: var(--primary); color: var(--white); width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700; }
        .step-title { font-size: 18px; font-weight: 700; }
        .search-input { width: 100%; padding: 14px 20px; border: 2px solid #eee; border-radius: 12px; font-size: 16px; outline: none; margin-bottom: 16px; position: sticky; top: 10px; z-index: 50; background: var(--white); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .search-input:focus { border-color: var(--primary); }
        .search-results { position: absolute; width: calc(100% - 40px); max-width: 560px; background: var(--white); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); max-height: 320px; overflow-y: auto; z-index: 50; display: none; }
        .search-results.show { display: block; }
        .search-item { padding: 12px 16px; cursor: pointer; border-bottom: 1px solid #f0f0f0; }
        .search-item:hover { background: var(--light); }
        .search-item .name { font-weight: 600; font-size: 15px; }
        .brand-section { margin-bottom: 16px; }
        .brand-title { font-size: 14px; font-weight: 700; color: var(--gray); margin-bottom: 8px; padding-left: 4px; }
        .car-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .car-item { padding: 14px 10px; background: var(--light); border-radius: 12px; cursor: pointer; border: 2px solid transparent; text-align: center; transition: all 0.2s; }
        .car-item:hover { border-color: var(--primary); }
        .car-item.selected { border-color: var(--primary); background: rgba(255,107,53,0.1); }
        .car-item .name { font-size: 14px; font-weight: 600; }
        .car-info { background: linear-gradient(135deg, #1a1a2e 0%, #2d2d4a 100%); color: var(--white); padding: 16px; border-radius: 12px; margin-bottom: 16px; display: none; }
        .car-info.show { display: block; }
        .car-info h3 { font-size: 18px; margin-bottom: 12px; }
        .service-group { margin-bottom: 18px; }
        .service-header { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; padding-left: 10px; border-left: 3px solid var(--primary); font-weight: 700; font-size: 15px; color: #555; }
        .service-options { display: grid; gap: 8px; }
        .service-opt { display: flex; justify-content: space-between; padding: 12px 14px; background: var(--light); border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s; }
        .service-opt:hover { border-color: var(--primary); }
        .service-opt.selected { border-color: var(--primary); background: rgba(255,107,53,0.08); }
        .service-opt .name { font-size: 14px; font-weight: 500; }
        .service-opt .price { font-weight: 700; color: var(--primary); font-size: 14px; }
        .film-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        .film-opt { padding: 12px; background: var(--light); border-radius: 10px; text-align: center; cursor: pointer; border: 2px solid transparent; }
        .film-opt:hover { border-color: var(--primary); }
        .film-opt.selected { border-color: var(--primary); background: rgba(255,107,53,0.1); }
        .film-opt .name { font-weight: 700; font-size: 14px; }
        .film-opt .desc { font-size: 11px; color: var(--gray); margin-top: 3px; }
        .summary { position: fixed; bottom: 0; left: 0; right: 0; background: var(--white); padding: 14px 20px; box-shadow: 0 -4px 20px rgba(0,0,0,0.1); z-index: 100; }
        .summary-btn { width: 100%; padding: 14px; background: var(--primary); color: var(--white); border: none; border-radius: 25px; font-size: 16px; font-weight: 600; cursor: pointer; }
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; align-items: flex-end; z-index: 200; }
        .modal.show { display: flex; }
        .modal-content { background: var(--white); border-radius: 20px 20px 0 0; width: 100%; max-height: 80vh; overflow-y: auto; padding: 20px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .modal-header h2 { font-size: 18px; font-weight: 700; }
        .modal-close { width: 32px; height: 32px; background: var(--light); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .modal-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f0f0f0; }
        .modal-item .name { flex: 1; }
        .modal-item .price { font-weight: 700; color: var(--primary); margin-left: 16px; }
        .modal-total { display: flex; justify-content: space-between; padding: 14px; background: var(--light); border-radius: 10px; font-size: 16px; font-weight: 700; margin: 16px 0; }
        .modal-total .price { color: var(--primary); }
        .modal-actions { display: grid; gap: 10px; }
        .modal-btn { display: block; padding: 14px; border-radius: 10px; text-align: center; text-decoration: none; font-weight: 600; }
        .modal-btn.line { background: #06c755; color: var(--white); }
        .modal-btn.phone { background: var(--dark); color: var(--white); }
        .back-to-top { position: fixed; bottom: 160px; right: 20px; width: 48px; height: 48px; background: var(--primary); color: var(--white); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; z-index: 150; box-shadow: 0 4px 12px rgba(0,0,0,0.2); opacity: 0; visibility: hidden; transition: all 0.3s; }
        .back-to-top.show { opacity: 1; visibility: visible; }
    </style>
</head>
<body>
    <header>
        <h1>DM SENSE 線上報價</h1>
        <p>選擇車型和服務，立即獲得報價</p>
    </header>
    <div class="container">
        <div class="step">
            <input type="text" class="search-input" id="search" placeholder="搜尋車款，如：Audi A1、BMW X3">
            <div class="search-results" id="results"></div>
            <div class="step-header">
                <span class="step-num">1</span>
                <span class="step-title">選擇車型</span>
            </div>
            <div id="carLists"></div>
        </div>
        <div class="car-info" id="carInfo">
            <h3 id="carTitle"></h3>
        </div>
        <div class="step" id="step2" style="display:none;">
            <div class="step-header">
                <span class="step-num">2</span>
                <span class="step-title">選擇服務</span>
            </div>
            <div class="service-group">
                <div class="service-header">鍍膜服務</div>
                <div class="service-options" id="coatingList"></div>
            </div>
            <div class="service-group">
                <div class="service-header">全車包膜</div>
                <div class="service-options" id="wrapList"></div>
            </div>
            <div class="service-group">
                <div class="service-header">改色膜</div>
                <div class="service-options" id="colorList"></div>
            </div>
            <div class="service-group">
                <div class="service-header">隔熱紙</div>
                <div class="film-grid" id="filmList"></div>
            </div>
        </div>
    </div>
    <div class="summary" id="summary" style="display:none;">
        <button class="summary-btn" id="showQuote">查看報價</button>
    </div>
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>報價單</h2>
                <div class="modal-close" id="closeModal">✕</div>
            </div>
            <div id="items"></div>
            <div class="modal-total"><span>預估金額</span><span class="price" id="totalPrice">洽專員</span></div>
            <div class="modal-actions">
                <a href="https://line.me/R/ti/p/%40dmsense" class="modal-btn line" target="_blank">LINE 專員報價</a>
                <a href="tel:04-2452-3533" class="modal-btn phone">電話諮詢</a>
            </div>
        </div>
    </div>
    <div class="back-to-top" id="backToTop">↑</div>
    <script>
    var db = [
        {b:"Audi",m:"A1",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Audi",m:"A3",c1:22000,c2:19000,c3:10000,wrap:55000,film:null},
        {b:"Audi",m:"A4",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Audi",m:"A5",c1:23000,c2:20000,c3:11000,wrap:65000,film:null},
        {b:"Audi",m:"A6",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Audi",m:"A6 Avant (Wagon)",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Audi",m:"A7",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Audi",m:"A8",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Audi",m:"E-Tron",c1:23000,c2:20000,c3:11000,wrap:65000,film:null},
        {b:"Audi",m:"E-Tron GT",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Audi",m:"Q2",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Audi",m:"Q3",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Audi",m:"Q5",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Audi",m:"Q7",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"Audi",m:"Q8",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"Audi",m:"RS6",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"BMW",m:"1 Series",c1:22000,c2:19000,c3:10000,wrap:60000,film:null},
        {b:"BMW",m:"2 Series",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"BMW",m:"2AT",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"BMW",m:"3 Series",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"BMW",m:"4 Series",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"BMW",m:"5 Series",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"BMW",m:"6 Series",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"BMW",m:"7 Series",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"BMW",m:"8 Series",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"BMW",m:"IX",c1:25000,c2:22000,c3:13000,wrap:70000,film:null},
        {b:"BMW",m:"M2",c1:22000,c2:19000,c3:10000,wrap:70000,film:null},
        {b:"BMW",m:"Touring (旅行車)",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"BMW",m:"X1",c1:24000,c2:21000,c3:12000,wrap:65000,film:null},
        {b:"BMW",m:"X2",c1:24000,c2:21000,c3:12000,wrap:60000,film:null},
        {b:"BMW",m:"X3",c1:24000,c2:21000,c3:12000,wrap:60000,film:22000},
        {b:"BMW",m:"X4",c1:24000,c2:21000,c3:12000,wrap:60000,film:22000},
        {b:"BMW",m:"X5",c1:25000,c2:22000,c3:13000,wrap:70000,film:22000},
        {b:"BMW",m:"X6",c1:25000,c2:22000,c3:13000,wrap:70000,film:22000},
        {b:"BMW",m:"X7",c1:26000,c2:23000,c3:14000,wrap:80000,film:null},
        {b:"BMW",m:"Z4",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"BMW",m:"i4",c1:23000,c2:20000,c3:11000,wrap:65000,film:null},
        {b:"BMW",m:"iX1",c1:24000,c2:21000,c3:12000,wrap:65000,film:null},
        {b:"Citroen / Smart",m:"Berlingo",c1:26000,c2:23000,c3:14000,wrap:70000,film:null},
        {b:"Citroen / Smart",m:"C5",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Citroen / Smart",m:"Smart Fortwo",c1:null,c2:null,c3:null,wrap:null,film:null},
        {b:"Fiat / Alfa",m:"Fiat",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Fiat / Alfa",m:"Giulia",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Fiat / Alfa",m:"Stelvio",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Fiat / Alfa",m:"Tonale",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Honda",m:"CRV",c1:24000,c2:21000,c3:12000,wrap:null,film:20000},
        {b:"Honda",m:"CRZ",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Honda",m:"Civic",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Honda",m:"FIT",c1:22000,c2:19000,c3:10000,wrap:50000,film:null},
        {b:"Honda",m:"HRV",c1:24000,c2:21000,c3:12000,wrap:55000,film:null},
        {b:"Honda",m:"Odyssey",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"Infiniti",m:"FX35",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Infiniti",m:"Q30",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Infiniti",m:"Q50",c1:23000,c2:20000,c3:11000,wrap:60000,film:null},
        {b:"Infiniti",m:"Q60",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Infiniti",m:"QX50",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Infiniti",m:"QX55",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Infiniti",m:"QX60",c1:25000,c2:22000,c3:13000,wrap:null,film:20000},
        {b:"Jaguar",m:"E-Pace",c1:24000,c2:21000,c3:12000,wrap:65000,film:null},
        {b:"Jaguar",m:"F-Pace",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Jaguar",m:"F-Type",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Jaguar",m:"I-Pace",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Jaguar",m:"XF",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Kia",m:"Carens",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Kia",m:"Carnival",c1:31000,c2:28000,c3:19000,wrap:null,film:null},
        {b:"Kia",m:"Ceed",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Kia",m:"EV6",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Kia",m:"EV9",c1:26000,c2:23000,c3:null,wrap:null,film:null},
        {b:"Kia",m:"KA4 Carnival",c1:33000,c2:30000,c3:21000,wrap:null,film:null},
        {b:"Kia",m:"Picanto",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Kia",m:"Sorento",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Kia",m:"Sportage",c1:25000,c2:22000,c3:13000,wrap:60000,film:null},
        {b:"Kia",m:"Sportswagon",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Kia",m:"Stonic",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"LEXUS",m:"CT200H",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"LEXUS",m:"ES",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"LEXUS",m:"IS",c1:22000,c2:19000,c3:10000,wrap:60000,film:null},
        {b:"LEXUS",m:"LBX",c1:23000,c2:20000,c3:null,wrap:null,film:null},
        {b:"LEXUS",m:"LC",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"LEXUS",m:"LM",c1:31000,c2:28000,c3:19000,wrap:null,film:28000},
        {b:"LEXUS",m:"LS",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"LEXUS",m:"NX",c1:24000,c2:21000,c3:12000,wrap:65000,film:null},
        {b:"LEXUS",m:"RC300",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"LEXUS",m:"RX",c1:25000,c2:22000,c3:13000,wrap:65000,film:22000},
        {b:"LEXUS",m:"RZ",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"LEXUS",m:"UX200",c1:23000,c2:20000,c3:11000,wrap:60000,film:null},
        {b:"Land Rover",m:"Defender 110",c1:33000,c2:30000,c3:21000,wrap:70000,film:22000},
        {b:"Land Rover",m:"Defender 130",c1:35000,c2:32000,c3:null,wrap:null,film:null},
        {b:"Land Rover",m:"Defender 90",c1:null,c2:null,c3:null,wrap:null,film:null},
        {b:"Land Rover",m:"Discovery",c1:null,c2:null,c3:null,wrap:null,film:null},
        {b:"Land Rover",m:"Discovery Sport",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"Land Rover",m:"Evoque",c1:24000,c2:21000,c3:12000,wrap:60000,film:null},
        {b:"Land Rover",m:"Range Rover",c1:31000,c2:28000,c3:19000,wrap:null,film:null},
        {b:"Land Rover",m:"Range Rover Velar",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"Luxgen",m:"M7",c1:26000,c2:23000,c3:14000,wrap:null,film:200008000},
        {b:"Luxgen",m:"N7",c1:25000,c2:22000,c3:13000,wrap:60000,film:20000},
        {b:"Luxgen",m:"S5",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Luxgen",m:"U5",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Luxgen",m:"U6 GT",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Luxgen",m:"U7",c1:25000,c2:22000,c3:null,wrap:null,film:null},
        {b:"Luxgen",m:"URX",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"MAZDA",m:"CX-3",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"MAZDA",m:"CX-5",c1:24000,c2:21000,c3:12000,wrap:60000,film:null},
        {b:"MAZDA",m:"CX-60",c1:25000,c2:22000,c3:13000,wrap:65000,film:null},
        {b:"MAZDA",m:"CX-9",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"MAZDA",m:"MX-5",c1:23000,c2:20000,c3:11000,wrap:50000,film:null},
        {b:"MAZDA",m:"Mazda3",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"MAZDA",m:"Mazda6",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"MAZDA",m:"Mazda6 wagon",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"MAZDA",m:"mazda5",c1:31000,c2:28000,c3:19000,wrap:65000,film:null},
        {b:"MAZDA",m:"老款MAZDA5",c1:31000,c2:28000,c3:19000,wrap:65000,film:null},
        {b:"MG",m:"G50",c1:31000,c2:28000,c3:null,wrap:null,film:25000},
        {b:"MG",m:"HS",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"MG",m:"MG4",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"MG",m:"ZS",c1:24000,c2:21000,c3:12000,wrap:60000,film:null},
        {b:"Maserati",m:"Ghibli",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Maserati",m:"Grecale",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Maserati",m:"Levante",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Mini",m:"Clubman",c1:23000,c2:20000,c3:11000,wrap:70000,film:null},
        {b:"Mini",m:"Countryman",c1:24000,c2:21000,c3:12000,wrap:60000,film:null},
        {b:"Mini",m:"GP",c1:null,c2:null,c3:null,wrap:null,film:null},
        {b:"Mini",m:"Mini Cooper",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"NISSAN",m:"Altima",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"NISSAN",m:"Ariya",c1:null,c2:null,c3:null,wrap:null,film:20000},
        {b:"NISSAN",m:"GTR",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"NISSAN",m:"Juke",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"NISSAN",m:"Kicks",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"NISSAN",m:"LEAF",c1:23000,c2:20000,c3:11000,wrap:65000,film:null},
        {b:"NISSAN",m:"Livina",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"NISSAN",m:"Sentra",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"NISSAN",m:"TIIDA",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"NISSAN",m:"X-trail",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Peugeot",m:"3008",c1:24000,c2:21000,c3:12000,wrap:null,film:20000},
        {b:"Peugeot",m:"5008",c1:25000,c2:22000,c3:13000,wrap:60000,film:22000},
        {b:"Peugeot",m:"508",c1:23000,c2:20000,c3:11000,wrap:70000,film:null},
        {b:"Porsche",m:"718",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Porsche",m:"911",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Porsche",m:"Cayenne",c1:25000,c2:22000,c3:13000,wrap:70000,film:22000},
        {b:"Porsche",m:"Macan",c1:24000,c2:21000,c3:12000,wrap:85000,film:null},
        {b:"Porsche",m:"Panamera",c1:24000,c2:21000,c3:12000,wrap:65000,film:20000},
        {b:"Porsche",m:"Taycan",c1:24000,c2:21000,c3:12000,wrap:65000,film:null},
        {b:"Skoda",m:"Fabia",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Skoda",m:"Kamiq",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Skoda",m:"Karoq",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Skoda",m:"Kodiaq",c1:25000,c2:22000,c3:13000,wrap:65000,film:22000},
        {b:"Skoda",m:"Octavia",c1:22000,c2:19000,c3:10000,wrap:65000,film:null},
        {b:"Skoda",m:"Octavia Combi",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Skoda",m:"Scala",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Skoda",m:"SuperB",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Subaru",m:"BRZ",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Subaru",m:"Crosstrek",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Subaru",m:"Forester",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Subaru",m:"Levorg",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Subaru",m:"Outback",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Subaru",m:"WRX",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Subaru",m:"WRX Wagon",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Subaru",m:"XV",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Suzuki",m:"Ignis",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Suzuki",m:"Jimny",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"Suzuki",m:"SX4",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Suzuki",m:"Swift",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Suzuki",m:"Vitara",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"TESLA",m:"MODEL 3",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"TESLA",m:"MODEL S",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"TESLA",m:"MODEL X",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"TESLA",m:"MODEL Y",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Toyota",m:"ALTIS",c1:22000,c2:19000,c3:10000,wrap:60000,film:null},
        {b:"Toyota",m:"Alphard",c1:31000,c2:28000,c3:19000,wrap:75000,film:null},
        {b:"Toyota",m:"Auris",c1:22000,c2:19000,c3:10000,wrap:60000,film:null},
        {b:"Toyota",m:"BZ4X",c1:24000,c2:21000,c3:12000,wrap:60000,film:22000},
        {b:"Toyota",m:"CAMRY",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Toyota",m:"CHR",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Toyota",m:"Corolla Cross",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Toyota",m:"Corolla Sport",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Toyota",m:"Fortis",c1:25000,c2:22000,c3:13000,wrap:60000,film:null},
        {b:"Toyota",m:"GR YARIS",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Toyota",m:"GR86",c1:23000,c2:20000,c3:11000,wrap:60000,film:null},
        {b:"Toyota",m:"Granvia",c1:33000,c2:30000,c3:21000,wrap:null,film:null},
        {b:"Toyota",m:"Hiace",c1:33000,c2:30000,c3:21000,wrap:null,film:null},
        {b:"Toyota",m:"Hilux",c1:33000,c2:30000,c3:21000,wrap:null,film:null},
        {b:"Toyota",m:"Previa",c1:33000,c2:30000,c3:21000,wrap:75000,film:null},
        {b:"Toyota",m:"Prius PHV",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Toyota",m:"RAV4",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Toyota",m:"SIENNA",c1:31000,c2:28000,c3:19000,wrap:null,film:null},
        {b:"Toyota",m:"Supra",c1:23000,c2:20000,c3:11000,wrap:4000,film:18000},
        {b:"Toyota",m:"VIOS",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Toyota",m:"Wish",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"Toyota",m:"Yaris Cross",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"VOLVO",m:"S60",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"VOLVO",m:"S90",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"VOLVO",m:"V40",c1:22000,c2:19000,c3:10000,wrap:60000,film:null},
        {b:"VOLVO",m:"V60",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"VOLVO",m:"V90",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"VOLVO",m:"XC40",c1:24000,c2:21000,c3:12000,wrap:55000,film:null},
        {b:"VOLVO",m:"XC60",c1:24000,c2:21000,c3:12000,wrap:65000,film:null},
        {b:"VOLVO",m:"XC90",c1:25000,c2:22000,c3:13000,wrap:null,film:23000},
        {b:"Volkswagen",m:"Allspace",c1:25000,c2:22000,c3:13000,wrap:65000,film:null},
        {b:"Volkswagen",m:"Arteon",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Volkswagen",m:"Caddy",c1:31000,c2:28000,c3:19000,wrap:null,film:null},
        {b:"Volkswagen",m:"California",c1:33000,c2:30000,c3:21000,wrap:70000,film:null},
        {b:"Volkswagen",m:"Golf",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Volkswagen",m:"Golf GTI",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Volkswagen",m:"Multivan",c1:33000,c2:30000,c3:21000,wrap:null,film:null},
        {b:"Volkswagen",m:"Polo",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"Volkswagen",m:"Shooting Brake",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"Volkswagen",m:"T-Cross",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Volkswagen",m:"T-ROC",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"Volkswagen",m:"T5",c1:31000,c2:28000,c3:19000,wrap:null,film:null},
        {b:"Volkswagen",m:"T6",c1:31000,c2:28000,c3:19000,wrap:null,film:null},
        {b:"Volkswagen",m:"Tiguan",c1:24000,c2:21000,c3:12000,wrap:65000,film:20000},
        {b:"Volkswagen",m:"Touran",c1:26000,c2:23000,c3:14000,wrap:60000,film:null},
        {b:"Volkswagen",m:"Variant",c1:23000,c2:20000,c3:11000,wrap:65000,film:null},
        {b:"三菱 (Mitsubishi)",m:"Colt plus",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"三菱 (Mitsubishi)",m:"Eclipse (日蝕)",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"三菱 (Mitsubishi)",m:"Fortis",c1:22000,c2:19000,c3:10000,wrap:60000,film:null},
        {b:"三菱 (Mitsubishi)",m:"Lancer",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"三菱 (Mitsubishi)",m:"Outlander",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"三菱 (Mitsubishi)",m:"Savrin",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"三菱 (Mitsubishi)",m:"Zinger",c1:25000,c2:22000,c3:null,wrap:null,film:null},
        {b:"其他超跑/美系",m:"Chevrolet Camaro",c1:null,c2:null,c3:null,wrap:null,film:null},
        {b:"其他超跑/美系",m:"Ferrari 488",c1:null,c2:null,c3:null,wrap:null,film:null},
        {b:"其他超跑/美系",m:"Lamborghini Urus",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"其他超跑/美系",m:"McLaren",c1:null,c2:null,c3:null,wrap:null,film:null},
        {b:"現代 Hyundai",m:"Custin",c1:33000,c2:30000,c3:21000,wrap:75000,film:null},
        {b:"現代 Hyundai",m:"Elantra",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"現代 Hyundai",m:"Ioniq5",c1:23000,c2:20000,c3:11000,wrap:65000,film:null},
        {b:"現代 Hyundai",m:"Ioniq6",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"現代 Hyundai",m:"Kona",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"現代 Hyundai",m:"Santa fe",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"現代 Hyundai",m:"Staria",c1:33000,c2:30000,c3:21000,wrap:null,film:null},
        {b:"現代 Hyundai",m:"Tucson",c1:24000,c2:21000,c3:12000,wrap:65000,film:20000},
        {b:"現代 Hyundai",m:"Venue",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"福特 Ford",m:"Focus",c1:22000,c2:19000,c3:10000,wrap:60000,film:null},
        {b:"福特 Ford",m:"Focus Active",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"福特 Ford",m:"Focus Wagon",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"福特 Ford",m:"Kuga",c1:24000,c2:21000,c3:12000,wrap:65000,film:20000},
        {b:"福特 Ford",m:"Mondeo wagon",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"福特 Ford",m:"Territory",c1:25000,c2:22000,c3:null,wrap:null,film:22000},
        {b:"福特 Ford",m:"旅玩家 Tourneo",c1:null,c2:null,c3:null,wrap:null,film:null},
        {b:"福特 Ford",m:"貨卡 Ranger",c1:33000,c2:30000,c3:21000,wrap:65000,film:null},
        {b:"福特 Ford",m:"野馬 Mustang",c1:24000,c2:21000,c3:12000,wrap:75000,film:null},
        {b:"賓士 (Mercedes)",m:"A180 (A-Class)",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"AMG-GT",c1:24000,c2:21000,c3:12000,wrap:65000,film:22000},
        {b:"賓士 (Mercedes)",m:"B180 (B-Class)",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"CLA",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"CLS",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"C系列 (C-Class)",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"EQA",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"EQB (七人座)",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"EQB (五人座)",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"EQE",c1:22000,c2:19000,c3:10000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"EQE SUV",c1:25000,c2:22000,c3:13000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"EQS",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"E系列 (E-Class)",c1:23000,c2:20000,c3:11000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"G CAR (G-Class)",c1:33000,c2:30000,c3:21000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"GLA",c1:24000,c2:21000,c3:12000,wrap:65000,film:null},
        {b:"賓士 (Mercedes)",m:"GLB",c1:25000,c2:22000,c3:13000,wrap:null,film:20000},
        {b:"賓士 (Mercedes)",m:"GLC",c1:24000,c2:21000,c3:12000,wrap:60000,film:null},
        {b:"賓士 (Mercedes)",m:"GLE",c1:25000,c2:22000,c3:13000,wrap:75000,film:null},
        {b:"賓士 (Mercedes)",m:"GLS",c1:26000,c2:23000,c3:14000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"ML400",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"S350D (S-Class)",c1:24000,c2:21000,c3:12000,wrap:null,film:null},
        {b:"賓士 (Mercedes)",m:"V-250D (V-Class)",c1:31000,c2:28000,c3:19000,wrap:null,film:null}
    ];
    var brands = ["Audi","BMW","Citroen / Smart","Fiat / Alfa","Honda","Infiniti","Jaguar","Kia","LEXUS","Land Rover","Luxgen","MAZDA","MG","Maserati","Mini","NISSAN","Peugeot","Porsche","Skoda","Subaru","Suzuki","TESLA","Toyota","VOLVO","Volkswagen","三菱 (Mitsubishi)","其他超跑/美系","現代 Hyundai","福特 Ford","賓士 (Mercedes)"];
    var car = null, svcs = [], color = null, film = null;
    var search = document.getElementById("search");
    var results = document.getElementById("results");
    var step2 = document.getElementById("step2");
    var summary = document.getElementById("summary");
    var carInfo = document.getElementById("carInfo");
    
    function showCarList() {
        var html = "";
        brands.forEach(function(b) {
            var cars = db.filter(function(c) { return c.b === b; });
            if (cars.length > 0) {
                html += '<div class="brand-section"><div class="brand-title">' + b + '</div><div class="car-grid">';
                cars.forEach(function(c) {
                    html += '<div class="car-item" data-b="' + c.b + '" data-m="' + c.m + '"><div class="name">' + c.m + '</div></div>';
                });
                html += '</div></div>';
            }
        });
        document.getElementById("carLists").innerHTML = html;
        var items = document.querySelectorAll(".car-item");
        for (var i = 0; i < items.length; i++) { items[i].onclick = function() { selCar(this.dataset.b, this.dataset.m); }; }
    }
    
    function selCar(b, m) {
        var c = db.find(function(x) { return x.b === b && x.m === m; });
        if (c) {
            car = c;
            document.getElementById("carTitle").textContent = c.b + " " + c.m;
            // 鍍膜
            var coatingHtml = '';
            if (c.c1) coatingHtml += '<div class="service-opt" data-t="coating" data-n="雙層石墨烯鍍膜" data-p="' + c.c1 + '"><span class="name">雙層石墨烯鍍膜</span><span class="price">$' + c.c1.toLocaleString() + '</span></div>';
            if (c.c2) coatingHtml += '<div class="service-opt" data-t="coating" data-n="雙層陶瓷鍍膜" data-p="' + c.c2 + '"><span class="name">雙層陶瓷鍍膜</span><span class="price">$' + c.c2.toLocaleString() + '</span></div>';
            if (c.c3) coatingHtml += '<div class="service-opt" data-t="coating" data-n="單層鍍膜" data-p="' + c.c3 + '"><span class="name">單層鍍膜</span><span class="price">$' + c.c3.toLocaleString() + '</span></div>';
            document.getElementById("coatingList").innerHTML = coatingHtml || '<div style="color:#999;font-size:14px;">此車型暫無鍍膜報價</div>';
            // 包膜
            var wrapHtml = '';
            if (c.wrap) {
                wrapHtml = '<div class="service-opt" data-t="wrap" data-n="TPU透明膜" data-p="' + (c.wrap * 1000) + '"><span class="name">TPU透明膜</span><span class="price">$' + (c.wrap * 1000).toLocaleString() + '</span></div>';
                wrapHtml += '<div class="service-opt" data-t="wrap" data-n="TPU消光膜" data-p="' + (c.wrap * 1000 + 5000) + '"><span class="name">TPU消光膜 (+$5,000)</span><span class="price">$' + (c.wrap * 1000 + 5000).toLocaleString() + '</span></div>';
            } else {
                wrapHtml = '<div style="color:#999;font-size:14px;">此車型暫無包膜報價</div>';
            }
            document.getElementById("wrapList").innerHTML = wrapHtml;
            // 改色膜
            var colorHtml = '';
            if (c.wrap) {
                colorHtml = '<div class="service-opt" data-t="color" data-n="改色膜PVC" data-p="' + (c.wrap * 1000) + '"><span class="name">PVC</span><span class="price">$' + (c.wrap * 1000).toLocaleString() + '</span></div>';
                colorHtml += '<div class="service-opt" data-t="color" data-n="改色膜PET" data-p="' + (c.wrap * 1000 + 5000) + '"><span class="name">PET (+$5,000)</span><span class="price">$' + (c.wrap * 1000 + 5000).toLocaleString() + '</span></div>';
                colorHtml += '<div class="service-opt" data-t="color" data-n="改色膜TPU" data-p="' + (c.wrap * 1000 + 15000) + '"><span class="name">TPU (+$15,000)</span><span class="price">$' + (c.wrap * 1000 + 15000).toLocaleString() + '</span></div>';
            } else {
                colorHtml = '<div style="color:#999;font-size:14px;">此車型暫無改色膜報價</div>';
            }
            document.getElementById("colorList").innerHTML = colorHtml;
            // 隔熱紙
            var filmHtml = '';
            if (c.film) {
                filmHtml = '<div class="film-opt" data-t="film" data-n="3M極黑隔熱紙" data-p="' + c.film + '"><div class="name">3M 極黑</div><div class="desc">$' + c.film.toLocaleString() + '</div></div>';
            } else {
                filmHtml = '<div style="color:#999;font-size:14px;">此車型暫無隔熱紙報價</div>';
            }
            document.getElementById("filmList").innerHTML = filmHtml;
            // 綁定事件
            document.querySelectorAll("#coatingList .service-opt").forEach(function(el) { el.onclick = function() { toggleSvc(this, "coating"); }; });
            document.querySelectorAll("#wrapList .service-opt").forEach(function(el) { el.onclick = function() { toggleSvc(this, "wrap"); }; });
            document.querySelectorAll("#colorList .service-opt").forEach(function(el) { el.onclick = function() { toggleColor(this); }; });
            document.querySelectorAll("#filmList .film-opt").forEach(function(el) { el.onclick = function() { toggleFilm(this); }; });
        }
        var items = document.querySelectorAll(".car-item");
        for (var i = 0; i < items.length; i++) { items[i].classList.remove("selected"); }
        var el = document.querySelector('.car-item[data-m="' + m + '"]');
        if (el) el.classList.add("selected");
        step2.style.display = "block";
        summary.style.display = "block";
        results.style.display = "none";
        carInfo.scrollIntoView({behavior: "smooth"});
    }
    
    function toggleSvc(el, type) {
        var n = el.dataset.n, p = parseInt(el.dataset.p);
        if (el.classList.contains("selected")) {
            el.classList.remove("selected");
            svcs = svcs.filter(function(s) { return s.n !== n; });
        } else {
            el.classList.add("selected");
            svcs.push({t:type, n:n, p:p});
        }
    }
    
    function toggleColor(el) {
        var n = el.dataset.n, p = parseInt(el.dataset.p);
        document.querySelectorAll("#colorList .service-opt").forEach(function(x) { x.classList.remove("selected"); });
        el.classList.add("selected");
        color = {n:n, p:p};
    }
    
    function toggleFilm(el) {
        var n = el.dataset.n, p = parseInt(el.dataset.p);
        document.querySelectorAll("#filmList .film-opt").forEach(function(x) { x.classList.remove("selected"); });
        el.classList.add("selected");
        film = {n:n, p:p};
    }
    
    search.onkeyup = search.oninput = function() {
        var q = search.value.toLowerCase().trim();
        results.style.display = "none";
        if (!q) return;
        var r = db.filter(function(c) {
            return (c.b + " " + c.m).toLowerCase().indexOf(q) >= 0;
        }).slice(0, 10);
        if (r.length > 0) {
            results.innerHTML = r.map(function(c) {
                return '<div class="search-item" data-b="' + c.b + '" data-m="' + c.m + '"><div class="name">' + c.b + ' ' + c.m + '</div></div>';
            }).join("");
            var items = results.querySelectorAll(".search-item");
            for (var i = 0; i < items.length; i++) { items[i].onclick = function() { selCar(this.dataset.b, this.dataset.m); }; }
            results.style.display = "block";
        }
    };
    
    document.getElementById("showQuote").onclick = function() {
        if (!car) { alert("請選擇車型"); return; }
        if (svcs.length === 0 && !color && !film) { alert("請選擇服務"); return; }
        var items = svcs.slice();
        if (color) items.push(color);
        if (film) items.push(film);
        var total = items.reduce(function(s, i) { return s + (i.p || 0); }, 0);
        document.getElementById("items").innerHTML = items.map(function(i) {
            return '<div class="modal-item"><span class="name">' + i.n + '</span><span class="price">$' + (i.p ? i.p.toLocaleString() : "洽專員") + '</span></div>';
        }).join("");
        document.getElementById("totalPrice").textContent = "$" + total.toLocaleString();
        document.getElementById("modal").classList.add("show");
    };
    
    document.getElementById("closeModal").onclick = function() { document.getElementById("modal").classList.remove("show"); };
    document.getElementById("modal").onclick = function(e) { if (e.target.id === "modal") document.getElementById("modal").classList.remove("show"); };
    
    // 回到頂部按鈕
    var backToTop = document.getElementById("backToTop");
    window.onscroll = function() {
        if (document.body.scrollTop > 500 || document.documentElement.scrollTop > 500) {
            backToTop.classList.add("show");
        } else {
            backToTop.classList.remove("show");
        }
    };
    backToTop.onclick = function() { window.scrollTo({top:0, behavior:"smooth"}); };
    
    showCarList();
    </script>
</body>
</html>