<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DM SENSE | ç·šä¸Šå ±åƒ¹ç³»çµ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #ff6b35; --dark: #1a1a2e; --light: #f8f9fa; --white: #fff; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Noto Sans TC', -apple-system, sans-serif; background: var(--light); color: #333; line-height: 1.6; padding-bottom: 100px; }
        header { background: var(--dark); color: #fff; padding: 20px; text-align: center; position: sticky; top: 0; z-index: 100; }
        header h1 { font-size: 22px; font-weight: 700; }
        header p { font-size: 13px; opacity: 0.8; margin-top: 5px; }
        .container { max-width: 600px; margin: 0 auto; padding: 16px; }
        .step { background: #fff; border-radius: 16px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); }
        .step-header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; }
        .step-num { background: var(--primary); color: #fff; width: 26px; height: 26px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700; flex-shrink: 0; }
        .step-title { font-size: 17px; font-weight: 700; }
        .search-box { position: relative; margin-bottom: 16px; }
        .search-input { width: 100%; padding: 14px 20px 14px 48px; border: 2px solid #eee; border-radius: 12px; font-size: 16px; transition: all 0.3s; }
        .search-input:focus { outline: none; border-color: var(--primary); }
        .search-icon { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); font-size: 18px; color: #999; }
        .search-results { position: absolute; top: 100%; left: 0; right: 0; background: #fff; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); max-height: 300px; overflow-y: auto; z-index: 50; display: none; }
        .search-results.show { display: block; }
        .search-result-item { padding: 14px 20px; cursor: pointer; border-bottom: 1px solid #f5f5f5; transition: background 0.2s; }
        .search-result-item:hover { background: var(--light); }
        .car-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .car-item { padding: 12px; background: var(--light); border-radius: 10px; text-align: center; cursor: pointer; border: 2px solid transparent; transition: all 0.3s; }
        .car-item:hover { border-color: var(--primary); }
        .car-item.selected { border-color: var(--primary); background: rgba(255,107,53,0.1); }
        .car-item .car-icon { font-size: 28px; margin-bottom: 6px; }
        .car-item .car-name { font-size: 14px; font-weight: 600; }
        .car-item .car-type { font-size: 11px; color: #999; margin-top: 4px; }
        .service-group { margin-bottom: 20px; }
        .service-group:last-child { margin-bottom: 0; }
        .service-group-header { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; padding-left: 10px; border-left: 3px solid var(--primary); }
        .service-group-header .icon { font-size: 18px; }
        .service-group-header h4 { font-size: 14px; font-weight: 700; color: #555; }
        .service-options { display: grid; gap: 10px; }
        .service-option { display: flex; align-items: center; justify-content: space-between; padding: 14px 16px; background: var(--light); border-radius: 10px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s; }
        .service-option:hover { border-color: var(--primary); }
        .service-option.selected { border-color: var(--primary); background: rgba(255,107,53,0.08); }
        .service-option .name { font-size: 15px; font-weight: 500; }
        .service-option .price { font-size: 14px; font-weight: 700; color: var(--primary); }
        .color-options { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .color-option { padding: 12px; background: var(--light); border-radius: 10px; text-align: center; cursor: pointer; border: 2px solid transparent; transition: all 0.3s; }
        .color-option:hover { border-color: var(--primary); }
        .color-option.selected { border-color: var(--primary); background: rgba(255,107,53,0.1); }
        .color-option .icon { font-size: 20px; margin-bottom: 4px; }
        .color-option .name { font-size: 13px; font-weight: 600; }
        .film-options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .film-option { padding: 14px; background: var(--light); border-radius: 10px; text-align: center; cursor: pointer; border: 2px solid transparent; transition: all 0.3s; }
        .film-option:hover { border-color: var(--primary); }
        .film-option.selected { border-color: var(--primary); background: rgba(255,107,53,0.1); }
        .film-option .name { font-size: 15px; font-weight: 700; }
        .film-option .desc { font-size: 12px; color: #888; margin-top: 4px; }
        .summary { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; padding: 14px 20px; box-shadow: 0 -4px 20px rgba(0,0,0,0.1); z-index: 100; }
        .summary-inner { max-width: 600px; margin: 0 auto; }
        .summary-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .summary-car { font-size: 14px; color: #666; }
        .summary-car strong { color: #333; display: block; font-size: 16px; margin-top: 4px; }
        .summary-btn { padding: 14px 28px; background: var(--primary); color: #fff; border: none; border-radius: 30px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.3s; width: 100%; }
        .summary-btn:hover { transform: scale(1.02); box-shadow: 0 4px 20px rgba(255,107,53,0.4); }
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; align-items: flex-end; z-index: 200; }
        .modal.show { display: flex; }
        .modal-content { background: #fff; border-radius: 24px 24px 0 0; width: 100%; max-height: 85vh; overflow-y: auto; padding: 24px; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid #eee; }
        .modal-header h2 { font-size: 20px; font-weight: 700; }
        .modal-close { width: 36px; height: 36px; background: var(--light); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 20px; }
        .modal-item { display: flex; justify-content: space-between; padding: 14px 0; border-bottom: 1px solid #f5f5f5; }
        .modal-item:last-child { border-bottom: none; }
        .modal-item .name { font-weight: 500; }
        .modal-total { display: flex; justify-content: space-between; padding: 18px; background: var(--light); border-radius: 12px; font-size: 18px; font-weight: 700; margin: 20px 0; }
        .modal-total .label { color: #666; }
        .modal-total .price { color: var(--primary); }
        .modal-actions { display: grid; gap: 12px; }
        .modal-btn { display: block; padding: 16px; border-radius: 12px; text-align: center; text-decoration: none; font-weight: 600; }
        .modal-btn.line { background: #06c755; color: #fff; }
        .modal-btn.phone { background: var(--dark); color: #fff; }
    </style>
</head>
<body>
    <header>
        <h1>DM SENSE ç·šä¸Šå ±åƒ¹</h1>
        <p>é¸æ“‡è»Šå‹å’Œæœå‹™ï¼Œç²å¾—å¿«é€Ÿå ±åƒ¹</p>
    </header>
    <div class="container">
        <div class="step">
            <div class="step-header">
                <span class="step-num">1</span>
                <span class="step-title">é¸æ“‡æ‚¨çš„è»Šå‹</span>
            </div>
            <div class="search-box">
                <span class="search-icon">ğŸ”</span>
                <input type="text" class="search-input" id="carSearch" placeholder="æœå°‹è»Šå‹ï¼Œå¦‚ï¼šModel 3ã€C300ã€X5...">
                <div class="search-results" id="searchResults"></div>
            </div>
            <div class="car-grid" id="carGrid">
                <div class="car-item" data-brand="ç‰¹æ–¯æ‹‰" data-model="Model 3" data-type="è½è»Š"><div class="car-icon">ğŸš—</div><div class="car-name">Tesla Model 3</div><div class="car-type">è½è»Š</div></div>
                <div class="car-item" data-brand="ç‰¹æ–¯æ‹‰" data-model="Model Y" data-type="ä¼‘æ—…è»Š"><div class="car-icon">ğŸš™</div><div class="car-name">Tesla Model Y</div><div class="car-type">ä¼‘æ—…è»Š</div></div>
                <div class="car-item" data-brand="BMW" data-model="3 Series" data-type="è½è»Š"><div class="car-icon">ğŸš—</div><div class="car-name">BMW 3 Series</div><div class="car-type">è½è»Š</div></div>
                <div class="car-item" data-brand="BMW" data-model="X5" data-type="ä¼‘æ—…è»Š"><div class="car-icon">ğŸš™</div><div class="car-name">BMW X5</div><div class="car-type">ä¼‘æ—…è»Š</div></div>
                <div class="car-item" data-brand="è³“å£«" data-model="C-Class" data-type="è½è»Š"><div class="car-icon">ğŸš—</div><div class="car-name">è³“å£« C-Class</div><div class="car-type">è½è»Š</div></div>
                <div class="car-item" data-brand="è³“å£«" data-model="GLC" data-type="ä¼‘æ—…è»Š"><div class="car-icon">ğŸš™</div><div class="car-name">è³“å£« GLC</div><div class="car-type">ä¼‘æ—…è»Š</div></div>
                <div class="car-item" data-brand="Lexus" data-model="NX" data-type="ä¼‘æ—…è»Š"><div class="car-icon">ğŸš™</div><div class="car-name">Lexus NX</div><div class="car-type">ä¼‘æ—…è»Š</div></div>
                <div class="car-item" data-brand="è±ç”°" data-model="Corolla Cross" data-type="ä¼‘æ—…è»Š"><div class="car-icon">ğŸš™</div><div class="car-name">Toyota Corolla Cross</div><div class="car-type">ä¼‘æ—…è»Š</div></div>
            </div>
            <p style="text-align: center; color: #999; font-size: 13px; margin-top: 12px;">å‘ä¸‹æ»‘å‹•çœ‹æ›´å¤šè»Šå‹ â–¼</p>
        </div>
        <div class="step" id="serviceStep" style="display:none;">
            <div class="step-header">
                <span class="step-num">2</span>
                <span class="step-title">é¸æ“‡æœå‹™é …ç›®</span>
            </div>
            <div class="service-group">
                <div class="service-group-header"><span class="icon">âœ¨</span><h4>éè†œæœå‹™</h4></div>
                <div class="service-options" id="coatingOptions">
                    <div class="service-option" data-type="coating" data-name="å–®å±¤é™¶ç“·éè†œ"><span class="name">å–®å±¤é™¶ç“·éè†œ</span><span class="price">æ´½å°ˆå“¡</span></div>
                    <div class="service-option" data-type="coating" data-name="é›™å±¤å¥—é¤éè†œ"><span class="name">é›™å±¤å¥—é¤éè†œ</span><span class="price">æ´½å°ˆå“¡</span></div>
                    <div class="service-option" data-type="coating" data-name="é›™å±¤çŸ³å¢¨çƒ¯éè†œ"><span class="name">é›™å±¤çŸ³å¢¨çƒ¯éè†œ</span><span class="price">æ´½å°ˆå“¡</span></div>
                    <div class="service-option" data-type="coating" data-name="ä¸‰å±¤çŸ³å¢¨çƒ¯éè†œ"><span class="name">ä¸‰å±¤çŸ³å¢¨çƒ¯éè†œ</span><span class="price">æ´½å°ˆå“¡</span></div>
                </div>
            </div>
            <div class="service-group">
                <div class="service-group-header"><span class="icon">ğŸ¨</span><h4>åŒ…è†œæœå‹™</h4></div>
                <div class="service-options" id="wrapOptions">
                    <div class="service-option" data-type="wrap" data-name="å…¨è»ŠåŒ…è†œ"><span class="name">å…¨è»ŠåŒ…è†œ</span><span class="price">æ´½å°ˆå“¡</span></div>
                    <div class="service-option" data-type="wrap" data-name="å…¨è»Šæ”¹è‰²åŒ…è†œ"><span class="name">å…¨è»Šæ”¹è‰²åŒ…è†œ</span><span class="price">æ´½å°ˆå“¡</span></div>
                </div>
            </div>
            <div class="service-group" id="colorGroup" style="display:none;">
                <div class="service-group-header"><span class="icon">ğŸ“Œ</span><h4>æ”¹è‰²è†œæè³ª</h4></div>
                <div class="color-options" id="colorOptions">
                    <div class="color-option" data-type="color" data-name="PETæ”¹è‰²è†œ"><div class="icon">âœ¨</div><div class="name">PET</div></div>
                    <div class="color-option" data-type="color" data-name="PVCæ”¹è‰²è†œ"><div class="icon">ğŸ’°</div><div class="name">PVC</div></div>
                    <div class="color-option" data-type="color" data-name="TPUæ”¹è‰²è†œ"><div class="icon">ğŸ”§</div><div class="name">TPU</div></div>
                </div>
            </div>
            <div class="service-group">
                <div class="service-group-header"><span class="icon">ğŸ</span><h4>è¿é¢¨é¢åŒ…è†œ</h4></div>
                <div class="service-options"><div class="service-option" data-type="front" data-name="è¿é¢¨é¢åŒ…è†œ"><span class="name">è¿é¢¨é¢åŒ…è†œ</span><span class="price">æ´½å°ˆå“¡</span></div></div>
            </div>
            <div class="service-group">
                <div class="service-group-header"><span class="icon">ğŸªŸ</span><h4>éš”ç†±ç´™</h4></div>
                <div class="film-options" id="filmOptions">
                    <div class="film-option" data-type="film" data-name="3Mæ¥µé»‘"><div class="name">3M æ¥µé»‘</div><div class="desc">éš±å¯†æ€§æ¥µä½³</div></div>
                    <div class="film-option" data-type="film" data-name="3Mæ¥µé€"><div class="name">3M æ¥µé€</div><div class="desc">é«˜é€å…‰åº¦</div></div>
                </div>
            </div>
        </div>
    </div>
    <div class="summary" id="summaryBar" style="display:none;">
        <div class="summary-inner">
            <div class="summary-top">
                <div class="summary-car">å·²é¸æ“‡<strong id="selectedCar">-</strong></div>
                <button class="summary-btn" id="showQuote">æŸ¥çœ‹å ±åƒ¹</button>
            </div>
        </div>
    </div>
    <div class="modal" id="quoteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“‹ å ±åƒ¹å–®</h2>
                <div class="modal-close" id="closeModal">âœ•</div>
            </div>
            <div id="quoteItems"></div>
            <div class="modal-total"><span class="label">é ä¼°é‡‘é¡</span><span class="price">è«‹æ´½å°ˆå“¡å ±åƒ¹</span></div>
            <div class="modal-actions">
                <a href="https://line.me/R/ti/p/%40dmsense" class="modal-btn line" target="_blank">ğŸ’¬ LINE å°ˆå“¡å ±åƒ¹</a>
                <a href="tel:04-2452-3533" class="modal-btn phone">ğŸ“ é›»è©±è«®è©¢</a>
            </div>
        </div>
    </div>
    <script>
        const carDatabase = [
            {brand:'ç‰¹æ–¯æ‹‰',model:'Model 3',type:'è½è»Š',icon:'ğŸš—'},{brand:'ç‰¹æ–¯æ‹‰',model:'Model Y',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'ç‰¹æ–¯æ‹‰',model:'Model S',type:'è½è»Š',icon:'ğŸš—'},{brand:'ç‰¹æ–¯æ‹‰',model:'Model X',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'BMW',model:'1 Series',type:'è½è»Š',icon:'ğŸš—'},{brand:'BMW',model:'2 Series',type:'è½è»Š',icon:'ğŸš—'},{brand:'BMW',model:'3 Series',type:'è½è»Š',icon:'ğŸš—'},{brand:'BMW',model:'4 Series',type:'è½è»Š',icon:'ğŸš—'},{brand:'BMW',model:'5 Series',type:'è½è»Š',icon:'ğŸš—'},{brand:'BMW',model:'X1',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'BMW',model:'X2',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'BMW',model:'X3',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'BMW',model:'X4',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'BMW',model:'X5',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'BMW',model:'X6',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'BMW',model:'X7',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'BMW',model:'iX',type:'é›»å‹•è»Š',icon:'ğŸš™'},{brand:'BMW',model:'i4',type:'é›»å‹•è»Š',icon:'ğŸš—'},{brand:'BMW',model:'i5',type:'é›»å‹•è»Š',icon:'ğŸš—'},{brand:'è³“å£«',model:'A-Class',type:'è½è»Š',icon:'ğŸš—'},{brand:'è³“å£«',model:'C-Class',type:'è½è»Š',icon:'ğŸš—'},{brand:'è³“å£«',model:'E-Class',type:'è½è»Š',icon:'ğŸš—'},{brand:'è³“å£«',model:'S-Class',type:'è½è»Š',icon:'ğŸš—'},{brand:'è³“å£«',model:'CLA',type:'è½è»Š',icon:'ğŸš—'},{brand:'è³“å£«',model:'CLE',type:'è½è»Š',icon:'ğŸš—'},{brand:'è³“å£«',model:'GLA',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'è³“å£«',model:'GLB',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'è³“å£«',model:'GLC',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'è³“å£«',model:'GLE',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'è³“å£«',model:'GLS',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'è³“å£«',model:'EQE',type:'é›»å‹•è»Š',icon:'ğŸš—'},{brand:'è³“å£«',model:'EQS',type:'é›»å‹•è»Š',icon:'ğŸš—'},{brand:'Lexus',model:'UX',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'Lexus',model:'NX',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'Lexus',model:'RX',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'Lexus',model:'RZ',type:'é›»å‹•è»Š',icon:'ğŸš™'},{brand:'Lexus',model:'ES',type:'è½è»Š',icon:'ğŸš—'},{brand:'Lexus',model:'LS',type:'è½è»Š',icon:'ğŸš—'},{brand:'Lexus',model:'LM',type:'MPV',icon:'ğŸš'},{brand:'è±ç”°',model:'Corolla Cross',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'è±ç”°',model:'RAV4',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'è±ç”°',model:'Altis',type:'è½è»Š',icon:'ğŸš—'},{brand:'è±ç”°',model:'Camry',type:'è½è»Š',icon:'ğŸš—'},{brand:'è±ç”°',model:'Crown',type:'è½è»Š',icon:'ğŸš—'},{brand:'è±ç”°',model:'Prius',type:'æ²¹é›»',icon:'ğŸš—'},{brand:'è±ç”°',model:'bZ4X',type:'é›»å‹•è»Š',icon:'ğŸš™'},{brand:'è±ç”°',model:'Sienta',type:'MPV',icon:'ğŸš'},{brand:'è±ç”°',model:'Alphard',type:'MPV',icon:'ğŸš'},{brand:'è±ç”°',model:'Vellfire',type:'MPV',icon:'ğŸš'},{brand:'è±ç”°',model:'Hilux',type:'çš®å¡',icon:'ğŸ›»'},{brand:'æœ¬ç”°',model:'CR-V',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'æœ¬ç”°',model:'HR-V',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'æœ¬ç”°',model:'Civic',type:'è½è»Š',icon:'ğŸš—'},{brand:'æœ¬ç”°',model:'Fit',type:'æ€èƒŒ',icon:'ğŸš—'},{brand:'æœ¬ç”°',model:'Odyssey',type:'MPV',icon:'ğŸš'},{brand:'ç¦ç‰¹',model:'Kuga',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'ç¦ç‰¹',model:'Focus',type:'è½è»Š',icon:'ğŸš—'},{brand:'ç¦ç‰¹',model:'Mustang',type:'è·‘è»Š',icon:'ğŸï¸'},{brand:'ç¦ç‰¹',model:'Ranger',type:'çš®å¡',icon:'ğŸ›»'},{brand:'ç¦ç‰¹',model:'Explorer',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'MG',model:'HS',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'MG',model:'ZS',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'MG',model:'MG4',type:'é›»å‹•è»Š',icon:'ğŸš—'},{brand:'ç¾ä»£',model:'Tucson',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'ç¾ä»£',model:'Santa Fe',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'ç¾ä»£',model:'Ioniq 5',type:'é›»å‹•è»Š',icon:'ğŸš™'},{brand:'ç¾ä»£',model:'Ioniq 6',type:'è½è»Š',icon:'ğŸš—'},{brand:'Kia',model:'Sportage',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'Kia',model:'Sorento',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'Kia',model:'EV6',type:'é›»å‹•è»Š',icon:'ğŸš™'},{brand:'Kia',model:'EV9',type:'é›»å‹•è»Š',icon:'ğŸš™'},{brand:'Kia',model:'Carnival',type:'MPV',icon:'ğŸš'},{brand:'ç¦æ–¯',model:'Golf',type:'æ€èƒŒ',icon:'ğŸš—'},{brand:'ç¦æ–¯',model:'T-Roc',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'ç¦æ–¯',model:'Tiguan',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'ç¦æ–¯',model:'ID.4',type:'é›»å‹•è»Š',icon:'ğŸš™'},{brand:'ç¦æ–¯',model:'ID.5',type:'é›»å‹•è»Š',icon:'ğŸš™'},{brand:'å¥§è¿ª',model:'A3',type:'è½è»Š',icon:'ğŸš—'},{brand:'å¥§è¿ª',model:'A4',type:'è½è»Š',icon:'ğŸš—'},{brand:'å¥§è¿ª',model:'A6',type:'è½è»Š',icon:'ğŸš—'},{brand:'å¥§è¿ª',model:'Q2',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'å¥§è¿ª',model:'Q3',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'å¥§è¿ª',model:'Q5',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'å¥§è¿ª',model:'Q8 e-tron',type:'é›»å‹•è»Š',icon:'ğŸš™'},{brand:'ä¿æ™‚æ·',model:'718',type:'è·‘è»Š',icon:'ğŸï¸'},{brand:'ä¿æ™‚æ·',model:'911',type:'è·‘è»Š',icon:'ğŸï¸'},{brand:'ä¿æ™‚æ·',model:'Taycan',type:'é›»å‹•è»Š',icon:'ğŸï¸'},{brand:'ä¿æ™‚æ·',model:'Macan',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'ä¿æ™‚æ·',model:'Cayenne',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'ä¿æ™‚æ·',model:'Panamera',type:'è½è»Š',icon:'ğŸš—'},{brand:'é€Ÿéœ¸é™¸',model:'Forester',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'é€Ÿéœ¸é™¸',model:'Outback',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'é€Ÿéœ¸é™¸',model:'Crosstrek',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'é€Ÿéœ¸é™¸',model:'WRX',type:'è·‘è»Š',icon:'ğŸï¸'},{brand:'é¦¬è‡ªé”',model:'Mazda3',type:'è½è»Š',icon:'ğŸš—'},{brand:'é¦¬è‡ªé”',model:'CX-30',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'é¦¬è‡ªé”',model:'CX-5',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'é¦¬è‡ªé”',model:'CX-60',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'é¦¬è‡ªé”',model:'MX-5',type:'è·‘è»Š',icon:'ğŸï¸'},{brand:'éˆ´æœ¨',model:'Vitara',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'éˆ´æœ¨',model:'Jimny',type:'è¶Šé‡',icon:'ğŸš™'},{brand:'éˆ´æœ¨',model:'Swift',type:'æ€èƒŒ',icon:'ğŸš—'},{brand:'æ—¥ç”¢',model:'Kicks',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'æ—¥ç”¢',model:'X-Trail',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'æ—¥ç”¢',model:'Sentra',type:'è½è»Š',icon:'ğŸš—'},{brand:'æ—¥ç”¢',model:'Leaf',type:'é›»å‹•è»Š',icon:'ğŸš—'},{brand:'ç´æ™ºæ·',model:'URX',type:'ä¼‘æ—…è»Š',icon:'ğŸš™'},{brand:'ç´æ™ºæ·',model:'nâ·',type:'é›»å‹•è»Š',icon:'ğŸš™'}
        ];
        let selectedCar = null, selectedServices = [], selectedColor = null, selectedFilm = null;
        const searchInput = document.getElementById('carSearch'), searchResults = document.getElementById('searchResults');
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            if (query.length < 1) { searchResults.classList.remove('show'); return; }
            
            // Fuzzy search: partial match, number matching, common abbreviations
            const results = carDatabase.filter(car => {
                const searchStr = `${car.brand} ${car.model} ${car.type}`.toLowerCase();
                const modelLower = car.model.toLowerCase();
                const brandLower = car.brand.toLowerCase();
                
                // Direct match
                if (searchStr.includes(query)) return true;
                
                // Partial number matching (520 â†’ 520, 5 Series)
                if (/^\d+$/.test(query)) {
                    if (modelLower.includes(query)) return true;
                    // Smart: 520 â†’ 5 Series, 320 â†’ 3 Series
                    const seriesMap = {'5': '5 Series', '3': '3 Series', '4': '4 Series', '2': '2 Series', '1': '1 Series'};
                    if (seriesMap[query] && modelLower.includes(seriesMap[query].toLowerCase())) return true;
                }
                
                // Fuzzy: misspell tolerance
                for (let i = 0; i < query.length; i++) {
                    if (!searchStr.includes(query[i])) return false;
                }
                return true;
            }).slice(0, 12);
            if (results.length === 0) { searchResults.innerHTML = '<div style="padding:20px;text-align:center;color:#999;">æ‰¾ä¸åˆ°è»Šå‹</div>'; }
            else { searchResults.innerHTML = results.map(car => `<div class="search-result-item" data-brand="${car.brand}" data-model="${car.model}" data-type="${car.type}"><div class="car-name">${car.icon} ${car.brand} ${car.model}</div><div class="car-brand">${car.type}</div></div>`).join(''); document.querySelectorAll('.search-result-item').forEach(item => item.addEventListener('click', () => selectCar(item.dataset.brand, item.dataset.model, item.dataset.type))); }
            searchResults.classList.add('show');
        });
        document.querySelectorAll('.car-item').forEach(item => item.addEventListener('click', () => selectCar(item.dataset.brand, item.dataset.model, item.dataset.type)));
        function selectCar(brand, model, type) { selectedCar = {brand,model,type}; document.querySelectorAll('.car-item').forEach(i => i.classList.remove('selected')); document.querySelector(`.car-item[data-model="${model}"]`)?.classList.add('selected'); document.getElementById('selectedCar').textContent = `${brand} ${model}`; document.getElementById('serviceStep').style.display = 'block'; document.getElementById('summaryBar').style.display = 'block'; document.getElementById('serviceStep').scrollIntoView({behavior:'smooth'}); searchResults.classList.remove('show'); }
        document.querySelectorAll('.service-option').forEach(opt => opt.addEventListener('click', () => { const type=opt.dataset.type,name=opt.dataset.name; const isSel=opt.classList.contains('selected'); if(isSel){opt.classList.remove('selected');selectedServices=selectedServices.filter(s=>s.name!==name);}else{opt.classList.add('selected');selectedServices.push({type,name});} document.getElementById('colorGroup').style.display=selectedServices.some(s=>s.name==='å…¨è»Šæ”¹è‰²åŒ…è†œ')?'block':'none'; updateQuote(); }));
        document.querySelectorAll('.color-option').forEach(opt => opt.addEventListener('click', () => { document.querySelectorAll('.color-option').forEach(o=>o.classList.remove('selected')); opt.classList.add('selected'); selectedColor=opt.dataset.name; updateQuote(); }));
        document.querySelectorAll('.film-option').forEach(opt => opt.addEventListener('click', () => { document.querySelectorAll('.film-option').forEach(o=>o.classList.remove('selected')); opt.classList.add('selected'); selectedFilm=opt.dataset.name; updateQuote(); }));
        function updateQuote() { const items = [...selectedServices]; if(selectedColor) items.push({type:'color',name:selectedColor}); if(selectedFilm) items.push({type:'film',name:selectedFilm}); const quoteItems=document.getElementById('quoteItems'); if(items.length===0) quoteItems.innerHTML='<div style="text-align:center;padding:40px;color:#999;">å°šæœªé¸æ“‡æœå‹™</div>'; else quoteItems.innerHTML=items.map(i=>`<div class="modal-item"><span class="name">${i.name}</span><span class="price">æ´½å°ˆå“¡</span></div>`).join(''); }
        document.getElementById('showQuote').addEventListener('click', () => { if(!selectedCar){alert('è«‹å…ˆé¸æ“‡è»Šå‹');return} if(selectedServices.length===0){alert('è«‹å…ˆé¸æ“‡æœå‹™');return} document.getElementById('quoteModal').classList.add('show'); });
        document.getElementById('closeModal').addEventListener('click', () => document.getElementById('quoteModal').classList.remove('show'));
        document.getElementById('quoteModal').addEventListener('click', (e) => { if(e.target===document.getElementById('quoteModal')) document.getElementById('quoteModal').classList.remove('show'); });
        document.addEventListener('click', (e) => { if(!e.target.closest('.search-box')) searchResults.classList.remove('show'); });
    </script>
</body>
</html>
